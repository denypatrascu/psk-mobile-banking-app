import{g as t}from"./p-87f0c668.js";import{e}from"./p-ff3b654f.js";import{o as n}from"./p-a5fc534d.js";window.cardinal=window.cardinal||{},window.cardinal.oldCustomTheme=window.cardinal.oldCustomTheme||{};const{oldCustomTheme:o}=window.cardinal;o.dependencies=o.dependencies||{},o.imports=o.imports||{},o.appTheme=o.appTheme||null;const{dependencies:s,imports:c}=o,i=/@import.*?["']([^"']+)["'].*?;/g;function a(t){return new Promise((n,o)=>{e(t).then(t=>{if(t.ok)return n(t.text());o({url:t.url,status:t.status,statusText:t.statusText})})})}window.cardinal=window.cardinal||{},window.cardinal.customTheme=window.cardinal.customTheme||{THEME:void 0,IMPORTS:{},EVENTS:{GET_THEME:"getThemeConfig",ADD_STYLE:"CustomTheme:add-style",REMOVE_STYLE:"CustomTheme:remove-style"}};const l=window.cardinal.customTheme;async function r(t){const o=t.tagName.toLowerCase(),s=t.mode||t.getAttribute("mode")||"default",c=`${window.basePath}themes/${l.THEME}/components/${o}/${o+("default"!==s?"."+s:"")+".css"}`;if(!l.IMPORTS[c]){const[t,n]=await async function(t){try{const n=await e(t);return[!0,await n.text()]}catch(t){return console.log(t),[!1]}}(c);if(!t)return;l.IMPORTS[c]=n}const i=l.IMPORTS[c];t.shadowRoot?(function(t){const e=t.host,n={true:{},false:{}};e.addEventListener(l.EVENTS.ADD_STYLE,o=>{o.preventDefault(),o.stopImmediatePropagation();const{data:{tag:s,slotted:c},callback:i}=o.detail;n[c][s]||(i(void 0,c?{target:e}:{target:t}),n[c][s]=!0)}),e.addEventListener(l.EVENTS.REMOVE_STYLE,t=>{t.preventDefault(),t.stopImmediatePropagation();const{data:{tag:e,slotted:o}}=t.detail;n[o][e]=!1})}(t.shadowRoot),n(t.shadowRoot,i)):(t.isSlotted=function(t){for(;t.parentElement;){if(t.parentElement.shadowRoot)return t.parentElement.shadowRoot.host===t.parentNode;t=t.parentElement}return!1}(t),t.dispatchEvent(new CustomEvent(l.EVENTS.ADD_STYLE,{bubbles:!0,cancelable:!0,composed:!0,detail:{data:{tag:o,slotted:t.isSlotted},callback:async(t,e)=>{if(t)return console.log(t);const{target:o}=e;n(o,i)}}})))}const d={VERSIONS:[{ref:function(){let e=t=>{let e={};t.addEventListener("styleExists",n=>{n.stopImmediatePropagation(),n.preventDefault();let o=n.detail.componentTag;(0,n.detail.callback)(void 0,e.hasOwnProperty(o),t),e[o]||(e[o]=!0)}),t.addEventListener("componentWasRemoved",t=>{let n=t.detail.componentTag;e[n]&&delete e[n]})};return e(document.querySelector("body")),n=>{const{componentWillLoad:l,disconnectedCallback:r}=n;n.componentWillLoad=function(){const n=t(this);if(n){let t=t=>{let o=n.tagName.toLowerCase(),r=e=>new Promise(n=>{let r=window.basePath+"themes/"+t+"/components/"+o+"/"+o+".css";s[r]||(s[r]=new Promise((t,e)=>{a(r).then(e=>{t(e)}).catch(e)})),s[r].then(t=>{var n,o;(n=r,o=t,c[n]||(c[n]=new Promise((t,e)=>{i.exec(o)?o.replace(i,(n,c)=>{s[c]||(s[c]=a(c)),s[c].then(e=>{t(o.replace(n,e))}).catch(e)}):t(o)})),c[n]).then(t=>{let n=document.createElement("style");n.innerHTML=t,e.append(n)})}).catch(t=>{console.log(`Request on resource ${t.url} ended with status: ${t.status} (${t.statusText})`)}).finally(()=>{n(l&&l.call(this))})});return n.shadowRoot?(e(n),r(n.shadowRoot)):new Promise(n.isConnected?t=>{let e=function t(e,n){return!!n&&(n.shadowRoot?e.parentNode===n.shadowRoot.host:t(n,n.parentElement))}(n,n.parentElement);n.isSlotted=e;let s=new CustomEvent("styleExists",{bubbles:!0,cancelable:!0,composed:!0,detail:{callback:(n,o,s)=>{n?console.log(n):o?t(l&&l.call(this)):(e||(s=s.shadowRoot),r(s).then(()=>{t()}))},componentTag:e?"SLOTTED:"+o:o}});n.dispatchEvent(s)}:t=>{t(l&&l.call(this))})};return o.appTheme?t(o.appTheme):new Promise(e=>{let s=new CustomEvent("getThemeConfig",{bubbles:!0,cancelable:!0,composed:!0,detail:(n,s)=>{if(n)return console.log(n);o.appTheme=s,t(o.appTheme).then(()=>{e()})}});n.dispatchEvent(s)})}return l&&l.call(this)},n.disconnectedCallback=function(){const e=t(this);let n=e.tagName.toLowerCase();e.isSlotted&&(n="SLOTTED:"+n);let o=new CustomEvent("componentWasRemoved",{bubbles:!0,cancelable:!0,composed:!0,detail:{componentTag:n}});e.dispatchEvent(o),r&&r.call(this)}}},version:"v1.0"},{ref:function(){return e=>{const{componentWillLoad:n,disconnectedCallback:o}=e;e.componentWillLoad=async function(){const e=t(this);return(e||e.isConnected)&&(l.THEME?await r(e):await async function(t,e){t.dispatchEvent(new CustomEvent(l.EVENTS.GET_THEME,{bubbles:!0,cancelable:!0,composed:!0,detail:async(n,o)=>{if(n)return console.log(n);l.THEME=o,await e(t)}}))}(e,r)),n&&n.call(this)},e.disconnectedCallback=async function(){const e=t(this);return e.dispatchEvent(new CustomEvent(l.EVENTS.REMOVE_STYLE,{bubbles:!0,cancelable:!0,composed:!0,detail:{data:{tag:e.tagName.toLowerCase(),slotted:!!e.isSlotted}}})),o&&o.call(this)}}},version:"v2.0"}]},u=window.customThemeVersion,m=([1,2].includes(u)?d.VERSIONS[u-1]:d.VERSIONS[0]).ref;export{m as C}